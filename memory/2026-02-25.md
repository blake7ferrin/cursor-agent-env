# 2026-02-25

- Session: Reviewed repo architecture and bridge setup; identified priorities around bridge state persistence, orchestrator command execution path, security hardening, and basic test/observability additions.
- Session: Implemented bridge hardening: file-backed user->agent store, authenticated `/chat` and `/agent` endpoints with rate limiting, enforced explicit `user_id`, executed parsed `SUBAGENT`/`LOCAL_ACTION` commands with allowlists, and updated bridge/PWA docs for new env vars.
- Session: Added Redis-backed persistence path (`REDIS_URL`) for agent mapping and rate limiting, refactored orchestrator dispatch into a dedicated module, and added Node test coverage for parser + dispatch with passing test run.
- Session: Discussed HVAC estimator-agent architecture; confirmed feasibility of replacing a static pricebook with a dynamic cost/rules engine plus AI intake and CRM/PDF estimate generation.
- Session: Built estimator MVP in bridge: new endpoints for config/catalog/estimate, deterministic pricing engine, printable HTML estimate output, and tests for estimate math + validation.
- Session: Added Housecall Pro CRM integration layer: auth/token handling, Housecall estimate payload mapper, export endpoint with dry-run mode, connector test/debug endpoints, docs updates, and passing tests.
